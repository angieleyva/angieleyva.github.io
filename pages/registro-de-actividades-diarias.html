<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de actividades diarias</title>
  <link rel="stylesheet" href="../styles/registro-de-actividades-diarias.css">

  <link href="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/site/site.min.css" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
</head>
<body>

  <header class="w-100 d-flex justify-content-center position-sticky top-0" style="background: var(--gradient); z-index: 1000;">
    <nav class="container-header navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand fs-2 fw-bold text-green" href="/">EcoVibe</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-between" id="navbarNavDropdown">
          <ul class="navbar-nav gap-0 gap-lg-4">
            <li class="nav-item d-flex align-items-center gap-2">
              <div class="dropdown">
                <span class="dropdown-toggle nav-link" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Servicios
                </span>
                <ul class="dropdown-menu mt-2 shadow-lg dropdown-menu--header__services">
                  <li id="calculatorService"><a class="dropdown-item" href="#" style="white-space: pre-wrap;">Calculadora de huella de carbono</a></li>
                  <li id="activeService"><a class="dropdown-item" href="/pages/flujo/registro-de-actividades-diarias-transporte.html" style="white-space: pre-wrap;">Registro de actividades diarias</a></li>
                  <li><a class="dropdown-item" href="/pages/tienda.html" style="white-space: pre-wrap;">Tienda</a></li>
                </ul>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="#">Rankings</a>
            </li>
            <li class="nav-item position-relative d-flex align-items-center form-control--header__search">
              <div class="position-absolute">
                <i class="ms-2 fa-solid fa-magnifying-glass"></i>
              </div>
              <input class="form-control form-control-sm" style="padding-left: 32px;" type="search" placeholder="Buscar" aria-label="Search">
            </li>
          </ul>
          <div class="d-flex align-items-center gap-2">
            <button type="button" class="d-block btn btn-success" id="isLoggedIn">Iniciar sesión</button>
            <div class="d-flex flex-column flex-lg-row align-items-center gap-4" id="isNotLoggedIn">
              <a class="d-flex align-items-center gap-2 nav-link w-100" href="#">
                <i class="fas fa-bell"></i>
                <span class="fs-6 d-lg-none">Notificaciones</span>
              </a>
              <a class="d-flex align-items-center gap-2 nav-link w-100" href="/pages/tienda.html">
                <i class="fas fa-dollar-sign"></i>
                <span class="fs-6 d-lg-none">Tienda</span>
              </a>
              <div class="nav-item dropdown d-none d-lg-block">
                <a class="nav-link" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fas fa-user"></i>
                </a>
                <ul class="dropdown-menu dropdown-menu-end shadow-lg mt-3">
                  <li><a class="dropdown-item" href="#">Perfil</a></li>
                  <li><a class="dropdown-item" href="#" id="closeSesionDesktop">Cerrar sesión</a></li>
                </ul>
              </div>
              <div class="d-flex flex-column gap-3 d-lg-none w-100">
                <a class="nav-link" href="#">
                  <i class="fas fa-user"></i>
                  <span class="fs-6">Perfil</span>
                </a>
                <button type="button" class="btn btn-sm btn-danger mb-2" id="closeSesionMobile">Cerrar sesión</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <script src="../js/header.js"></script>
  </header>

  <div class="position-absolute close-confetti" style="z-index: 2000;">
    <canvas id="my-canvas"></canvas>
  </div>

  <main class="container">
    <div class="w-full">
      <h2 class="text-center color-green fs-2 fw-bold my-4">Registro de actividades diarias</h2>
      <p class="text-center fs-5 mt-4">Para calcular la huella de carbono</p>
      <div class="flex items-center justify-center gap-2">
        <i class="fas fa-check-circle fs-1"></i>
        <span class="fs-5">Datos registrados</span>
      </div>
      <span class="d-flex justify-content-center w-100 fs-6 text-center color-secondary">+5 POINTS</span>
    </div>
    <h3 class="my-6 fs-4 fw-bold">Resultados de hoy :</h3>
    <div class="container-chart mb-4">
      <div class="container-canva">
        <canvas id="myChart"></canvas>
      </div>
      <div class="container-description">
        <p class="fs-2">El total de emisiones netas es de 21 kg de CO₂, considerando las siguientes categorías:</p>
        <div class="flex flex-col gap-4 mt-4">
          <div class="flex items-center gap-2">
            <div class="slot-color bg-01"></div>
            <span class="fs-6 fw-medium">Transporte: 12 kg</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="slot-color bg-02"></div>
            <span class="fs-6 fw-medium">Transporte: 12 kg</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="slot-color bg-03"></div>
            <span class="fs-6 fw-medium">Transporte: 12 kg</span>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"></script>

  <script>
    var confettiElement = document.getElementById('my-canvas');
    var confettiSettings = { target: confettiElement };
    var confetti = new ConfettiGenerator(confettiSettings);
    confetti.render();

    // Configuración del gráfico
    const ctx = document.getElementById('myChart').getContext('2d');
    new Chart(ctx, {
      type: 'pie', // Tipo de gráfico
      data: {
        labels: ['Transporte', 'Energía', 'Consumo'], // Etiquetas
        datasets: [{
          label: 'Porcentaje',
          data: [57.1, 23.8, 19.0], // Datos de cada sección
          backgroundColor: [
            'rgba(173, 216, 230, 0.8)', // Celeste
            'rgba(255, 223, 186, 0.8)', // Amarillo claro
            'rgba(144, 238, 144, 0.8)'  // Verde claro
          ],
          borderColor: [
            'rgba(173, 216, 230, 1)',
            'rgba(255, 223, 186, 1)',
            'rgba(144, 238, 144, 1)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            callbacks: {
              label: function(tooltipItem) {
                return `${tooltipItem.label}: ${tooltipItem.raw}%`;
              }
            }
          }
        }
      }
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/js/all.min.js" integrity="sha512-6sSYJqDreZRZGkJ3b+YfdhB3MzmuP9R7X1QZ6g5aIXhRvR1Y/N/P47jmnkENm7YL3oqsmI6AK+V6AD99uWDnIw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</body>
</html>